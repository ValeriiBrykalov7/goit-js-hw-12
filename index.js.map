{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function getImagesByQuery(query, currentPage) {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '53324223-e08795bb9ae8d90e4ba564674',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst ulEl = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nexport const loadBtn = document.querySelector('.load-button');\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      item =>\n        `<li class=\"gallery-item\">\n    <a href=\"${item.largeImageURL}\" class=\"gallery-link\"><img src=\"${item.webformatURL}\" alt=\"${item.tags}\" class=\"card-image\"></a>\n    \n      <ul class=\"stats\">\n        <li class=\"stat\">\n          <span class=\"stat-label\">Likes</span>\n          <span class=\"stat-value\">${item.likes}</span>\n        </li>\n        <li class=\"stat\">\n          <span class=\"stat-label\">Views</span>\n          <span class=\"stat-value\">${item.views}</span>\n        </li>\n        <li class=\"stat\">\n          <span class=\"stat-label\">Comments</span>\n          <span class=\"stat-value\">${item.comments}</span>\n        </li>\n        <li class=\"stat\">\n          <span class=\"stat-label\">Downloads</span>\n          <span class=\"stat-value\">${item.downloads}</span>\n        </li>\n      </ul>\n</li>`\n    )\n    .join('');\n  ulEl.insertAdjacentHTML('beforeend', markup);\n\n  gallery.refresh();\n}\n\nexport function clearGallery() {\n  ulEl.textContent = '';\n}\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadBtn.classList.add('hidden');\n}\n","import getImagesByQuery from './js/pixabay-api';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  loadBtn,\n} from './js/render-functions';\n\nconst formEl = document.querySelector('form');\n\nconst pageSize = 15;\nlet query;\nlet currentPage;\nlet totalPages;\n\nformEl.addEventListener('submit', async e => {\n  e.preventDefault();\n  clearGallery();\n\n  hideLoadMoreButton();\n\n  query = e.target.elements.search.value.trim();\n  currentPage = 1;\n  totalPages = 0;\n\n  if (!query) {\n    iziToast.info({\n      message: 'Please enter a query',\n      position: 'topRight',\n      color: 'yellow',\n    });\n    return;\n  }\n  showLoader();\n  try {\n    const res = await getImagesByQuery(query, currentPage);\n\n    if (res.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        color: 'red',\n        position: 'topRight',\n      });\n      return;\n    } else {\n      createGallery(res.hits);\n      totalPages = Math.ceil(res.totalHits / pageSize);\n      checkBtnStatus();\n    }\n  } catch (err) {\n    iziToast.error({\n      message: err.message,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nloadBtn.addEventListener('click', async () => {\n  if (currentPage >= totalPages) {\n    hideLoadMoreButton();\n    return;\n  }\n  currentPage += 1;\n  showLoader();\n  hideLoadMoreButton();\n  try {\n    const res = await getImagesByQuery(query, currentPage);\n    createGallery(res.hits);\n    checkBtnStatus();\n\n    scroll();\n  } catch (err) {\n    iziToast.error({\n      message: err.message,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nfunction checkBtnStatus() {\n  if (currentPage < totalPages) {\n    showLoadMoreButton();\n  } else {\n    hideLoadMoreButton();\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'bottomRight',\n    });\n  }\n}\n\nfunction scroll() {\n  const card = document.querySelector('.gallery-item');\n  const cardHeigth = card.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeigth * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["getImagesByQuery","query","currentPage","axios","error","gallery","SimpleLightbox","ulEl","loader","loadBtn","createGallery","images","markup","item","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","formEl","pageSize","totalPages","e","iziToast","res","checkBtnStatus","err","scroll","cardHeigth"],"mappings":"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"}